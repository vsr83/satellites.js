var satellites;(()=>{"use strict";var e={654:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Dataset=void 0;const n=i(877);t.Dataset=class{constructor(e){this.fleetCollection={},this.keyField=e}addTle(e,t){t in this.fleetCollection&&(e.toJson(),this.fleetCollection[t].addTarget(e.toJson()))}addOsv(e){}addKepler(e){}clear(){for(const[e,t]of Object.entries(this.fleetCollection))delete this.fleetCollection[e]}addFleet(e){return!(e in this.fleetCollection)&&(this.fleetCollection[e]=new n.TargetCollection(this.keyField),!0)}removeFleet(e){return e in this.fleetCollection&&(delete this.fleetCollection[e],!0)}hasFleet(e){return e in this.fleetCollection}getFleet(e){if(this.hasFleet(e))return this.fleetCollection[e];throw Error('Fleet "'+e+'" does not exist!')}removeTarget(e){let t=!1;for(const[i,n]of Object.entries(this.fleetCollection))n.containsKey(e)&&(n.removeTarget(e),t=!0);return t}moveTarget(e,t,i){if(t in this.fleetCollection&&i in this.fleetCollection&&t!=i){const n=this.fleetCollection[t],s=this.fleetCollection[i];e in this.fleetCollection[t]&&(s.addTarget(n.getTarget(e)),n.removeTarget(e))}return!1}aggregateFleets(e,t){e in this.fleetCollection||(this.fleetCollection[e]=new n.TargetCollection(this.keyField));const i=this.fleetCollection[e];for(let n=0;n<t.length;n++){const s=t[n];if(e!=s&&s in this.fleetCollection){const e=this.fleetCollection[s],t=e.getKeys();for(let n=0;n<t.length;n++){const s=t[n];let o=e.getTarget(s);i.addTarget(o),e.removeTarget(s)}delete this.fleetCollection[s]}}}exportToJson(){const e={};for(const[t,i]of Object.entries(this.fleetCollection))e[t]=i.data;return JSON.stringify(e)}importFromJson(e){JSON.parse(e)}}},643:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DatasetView=void 0;const n=i(697);t.DatasetView=class{constructor(e){this.dataset=e}setTleElements(e,t,i,n){function s(e){const t=document.getElementById(e);if(null===t)throw Error('Element "'+e+'" not found!');return t}try{this.elementTleContainer=s(e),this.elementTleListInput=s(t),this.elementTleEnterButton=s(i),this.elementTleCancelButton=s(n)}catch(e){throw e}this.elementTleEnterButton.addEventListener("click",this.tleDialogEnter.bind(this)),this.elementTleCancelButton.addEventListener("click",this.tleDialogCancel.bind(this))}tleDialogEnter(){console.log("tleDialogEnter"),this.elementTleContainer.style.visibility="hidden";const e=this.elementTleListInput.value.split("\n"),t=Math.floor(e.length/3);for(let i=0;i<t;i++){const t=[e[3*i],e[3*i+1],e[3*i+2]],s=n.Tle.fromLines(t),o=s.toJson(),l=this.dataset.getFleet(this.currentFleet);s.checkSumValid?l.containsTarget(o)?console.log("Target "+o.OBJECT_ID+" already contained in the dataset."):l.addTarget(o):console.log("Target "+o.OBJECT_ID+" has invalid checksum.")}this.elementTleListInput.value="",this.update()}tleDialogCancel(){console.log("tleDialogCancel"),this.elementTleContainer.style.visibility="hidden",this.elementTleListInput.value=""}setElements(e,t,i,n,s,o,l,r,a,c,h,d,m,u,g){function T(e){const t=document.getElementById(e);if(null===t)throw Error('Element "'+e+'" not found!');return t}try{this.elementDialog=T(e),this.elementCloseButton=T(t),this.elementFleetSelect=T(i),this.elementFleetAddButton=T(n),this.elementFleetRemoveButton=T(s),this.elementFleetNumLabel=T(o),this.elementAddDataTleButton=T(l),this.elementAddDataJsonButton=T(l),this.elementAddDataOsvButton=T(r),this.elementAddDataKeplerButton=T(a),this.elementAddDataJsonButton=T(c),this.elementTargetsFilter=T(h),this.elementTargetsDeleteButton=T(d),this.elementTargetsClearButton=T(m),this.elementTargetsListTable=T(u),this.elementDatasetText=T(g)}catch(e){throw e}this.elementCloseButton.addEventListener("click",this.hide.bind(this)),this.elementFleetSelect.addEventListener("change",this.fleetSelect.bind(this)),this.elementFleetAddButton.addEventListener("click",this.fleetAdd.bind(this)),this.elementFleetRemoveButton.addEventListener("click",this.fleetRemove.bind(this)),this.elementAddDataTleButton.addEventListener("click",this.addDataTle.bind(this)),this.elementAddDataJsonButton.addEventListener("click",this.addDataJson.bind(this)),this.elementAddDataOsvButton.addEventListener("click",this.addDataOsv.bind(this)),this.elementAddDataKeplerButton.addEventListener("click",this.addDataKepler.bind(this)),this.elementTargetsDeleteButton.addEventListener("click",this.targetsDelete.bind(this)),this.elementTargetsClearButton.addEventListener("click",this.fleetClear.bind(this)),this.elementTargetsFilter.addEventListener("keyup",this.textOnKeyUp.bind(this)),this.eventCloseDialog=new Event("closeDialog",{}),this.eventUpdateDataset=new Event("updateDataset",{}),this.elementTargetsListBody=this.elementTargetsListTable.createTBody(),this.fleetSelect()}isVisible(){return"visible"===this.elementDialog.style.visibility}show(){this.elementDialog.style.visibility="visible"}hide(){this.elementDialog.style.visibility="hidden",this.elementDialog.dispatchEvent(this.eventCloseDialog)}selectTarget(e,t){console.log("selectTarget "+e+" "+t);const i=JSON.stringify(this.dataset.getFleet(e).getTarget(t)).replace(/\,/gi,",&#10;");this.elementDatasetText.innerHTML=i}deleteTarget(e,t){console.log("deleteTarget "+e+" "+t);for(let e=0;e<this.elementTargetsListBody.rows.length;e++){const i=this.elementTargetsListBody.rows[e],n=i.getElementsByTagName("td")[0];if(n){const e=n.textContent||n.innerText;if(t.toString()===e){i.remove();break}}}this.dataset.getFleet(e).removeTarget(t),this.elementDialog.dispatchEvent(this.eventUpdateDataset),this.updateCount()}textOnKeyUp(){const e=this.elementTargetsFilter.value.toUpperCase(),t=this.elementTargetsListBody.getElementsByTagName("tr");for(let i=0;i<t.length;i++){const n=t[i].getElementsByTagName("td")[1];n&&((n.textContent||n.innerText).toUpperCase().indexOf(e)>-1?t[i].style.display="":t[i].style.display="none")}}update(){function e(e){return function(){this.elementTargetsDeleteButton.checked?(console.log("Delete "+e),this.deleteTarget(this.currentFleet,e)):(console.log("Select "+e),this.selectTarget(this.currentFleet,e))}}const t=this.elementTargetsListBody.rows.length;for(let e=0;e<t;e++)this.elementTargetsListBody.deleteRow(-1);const i=this.dataset.getFleet(this.currentFleet),n=(i.keyField,i.data),s=Object.keys(n);for(let t=0;t<s.length;t++){const i=s[t],o=this.elementTargetsListBody.insertRow();o.addEventListener("click",e(i).bind(this));const l=o.insertCell();let r=document.createTextNode(i.toString());l.appendChild(r);const a=o.insertCell();let c=document.createTextNode(n[i].OBJECT_NAME.toString());a.appendChild(c)}this.elementDialog.dispatchEvent(this.eventUpdateDataset),this.updateCount()}updateCount(){this.elementFleetNumLabel.innerText=this.dataset.getFleet(this.currentFleet).getLength()+" targets"}targetsDelete(){console.log("targetsDelete ")}targetsMove(){console.log("targetsMove")}targetsEdit(){console.log("targetsEdit")}fleetClear(){this.dataset.getFleet(this.currentFleet).clear(),this.update()}fleetSelect(){const e=this.elementFleetSelect.item(this.elementFleetSelect.selectedIndex);console.log("fleetSelect "+this.elementFleetSelect.selectedIndex),null===e||(console.log(e.innerText),this.currentFleet=e.innerText,this.update())}fleetAdd(){const e=window.prompt("Insert fleet name","");if(null===e);else if(0==e.length)alert("Empty fleet name is not valid!");else if(this.dataset.hasFleet(e))alert('Fleet "'+e+'" already exists!');else{this.dataset.addFleet(e);const t=new Option(e,e);this.elementFleetSelect.add(t)}}fleetRemove(){if(console.log("fleetRemove "+this.currentFleet),console.log(this.elementFleetSelect.options),"default"===this.currentFleet)alert("Cannot remove default fleet!");else{this.dataset.removeFleet(this.currentFleet)||alert('Failed to remove fleet "'+this.currentFleet+'"');const e=this.elementFleetSelect.options;for(let t=0;t<e.length;t++)"default"===e[t].text&&(e[t].selected=!0,this.fleetSelect())}}addDataTle(){console.log("addDateTle"),this.elementTleContainer.style.visibility="visible"}addDataJson(){console.log("addDateJson")}addDataOsv(){console.log("addDateOsv")}addDataKepler(){console.log("addDateKepler")}}},857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HelpView=void 0,t.HelpView=class{constructor(){this.visible=!1}setElement(e){const t=document.getElementById(e);if(null===t)throw Error('Element "'+e+'" not found!');this.elementDialog=t}show(){this.visible=!0,this.elementDialog.style.visibility="visible"}hide(){this.visible=!1,this.elementDialog.style.visibility="hidden"}isVisible(){return this.visible}}},406:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JulianTime=void 0,t.JulianTime=class{static dateJulianYmd(e,t,i){t<3&&(e--,t+=12);const n=Math.floor(e/100),s=Math.floor(n/4);return Math.floor(2-n+s)+i+Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))-1524.5}static timeJulianYmdhms(e,t,i,n,s,o){return this.dateJulianYmd(e,t,i)+n/24+s/1440+o/86400}static timeJulianTs(e){let t=e.getUTCFullYear(),i=e.getUTCMonth()+1,n=e.getUTCDate(),s=e.getUTCHours(),o=e.getUTCMinutes(),l=e.getUTCSeconds()+e.getUTCMilliseconds()/1e3;return this.timeJulianYmdhms(t,i,n,s,o,l)}static dateJulianTs(e){let t=e.getUTCFullYear(),i=e.getUTCMonth()+1,n=e.getUTCDate();return e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),this.dateJulianYmd(t,i,n)}static timeGregorian(e){const t=Math.floor(e+.5),i=e+.5-t;let n=t;if(t>=2299161){let e=Math.floor((t-1867216.25)/36524.25);n=t+1+e-Math.floor(e/4)}const s=n+1524,o=Math.floor((s-122.1)/365.25),l=Math.floor(365.25*o),r=Math.floor((s-l)/30.6001),a=Math.floor(s-l-Math.floor(30.6001*r)+i);let c=r-1;r>=14&&(c=r-13);let h=o-4716;c<3&&(h=o-4715);let d=i;d<0&&(d+=1);const m=Math.floor(24*d);d-=m/24;const u=Math.floor(1440*d);return d-=u/1440,{year:h,month:c,mday:a,hour:m,minute:u,second:86400*d}}}},579:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MathUtils=void 0,t.MathUtils=class{static deg2Rad(e){return 2*Math.PI*e/360}static rad2Deg(e){return 180*e/Math.PI}static sind(e){return Math.sin(e*Math.PI/180)}static cosd(e){return Math.cos(e*Math.PI/180)}static tand(e){return Math.tan(this.deg2Rad(e))}static asind(e){return this.rad2Deg(Math.asin(e))}static acosd(e){return this.rad2Deg(Math.acos(e))}static atand(e){return this.rad2Deg(Math.atan(e))}static atan2d(e,t){return this.rad2Deg(Math.atan2(e,t))}static cross(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}static dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}static norm(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}static vecSum(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]}static linComb(e,t){const i=t[0].length;let n=new Array(i).fill(0);for(let s=0;s<e.length;s++){const o=t[s];for(let t=0;t<i;t++)n[t]+=e[s]*o[t]}return n}static vecDiff(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]}static vecMul(e,t){return[e[0]*t,e[1]*t,e[2]*t]}}},933:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Panel=void 0,t.Panel=class{constructor(){this.elements=[],this.activeElement=-1}addElement(e,t,i,n){const s={label:e,visibility:t,imagePathLight:n,imagePathDark:i};this.elements.push(s)}getElementIndex(e){for(let t=0;t<this.elements.length;t++)if(this.elements[t].label===e)return t;return-1}showElement(e){const t=this.getElementIndex(e);-1!=t&&this.activeElement!=t&&(-1!=this.activeElement&&this.elements[this.activeElement].visibility.hide(),this.elements[t].visibility.show(),this.activeElement=t)}getElement(e){if(!(e<0||e>=this.getNumElements()))return this.elements[e]}getNumElements(){return this.elements.length}getActive(){return this.activeElement}}},969:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PanelView=void 0,t.PanelView=class{constructor(e,t,i){this.panel=e,this.elementParent=document.getElementById(t),this.elements=[],this.elementParentId=t,this.iconSize=i}create(){console.log("PanelView.create");for(let e=0;e<this.panel.getNumElements();e++){const t=this.panel.getElement(e),i=document.createElement("Div"),n=document.createElement("img");n.setAttribute("id",this.elementParentId+"_"+e),i.className="panelHighlight",n.style.width=this.iconSize+"px",n.style.height=this.iconSize+"px",this.elements.push(n),this.elementParent.appendChild(i),i.appendChild(n);const s=this;n.addEventListener("click",(function(){s.panel.showElement(t.label),s.update()}))}this.update()}update(){console.log("PanelView.update");for(let e=0;e<this.panel.getNumElements();e++){const t=this.panel.getElement(e),i=this.elements[e];this.panel.getActive()==e?i.setAttribute("src",t.imagePathLight):i.setAttribute("src",t.imagePathDark)}}}},877:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TargetCollection=void 0,t.TargetCollection=class{constructor(e){this.keyField=e,this.data={}}getKey(e){if(!(this.keyField in e))throw Error('TargetInfo does not contain "'+this.keyField+'"!');return e[this.keyField]}containsKey(e){return e in this.data}addTarget(e){const t=this.getKey(e);if(this.containsKey(t))throw Error('TargetCollection already contains target "'+t+'"!');this.data[t]=e}removeTarget(e){if(!this.containsKey(e))throw Error('TargetCollection does not contain target "'+e+'"!');delete this.data[e]}containsTarget(e){if(!(this.keyField in e))throw Error("TargetInfo does not contain the key field!");return e[this.keyField]in this.data}getTarget(e){if(!this.containsKey(e))throw Error('TargetCollection does not contain target "'+e+'"!');return this.data[e]}getKeys(){return Object.keys(this.data)}getTargets(){const e=[],t=this.getKeys();for(let i=0;i<t.length;i++){const n=t[i];e.push(this.data[n])}return e}getLength(){return Object.keys(this.data).length}clear(){const e=this.getKeys();for(let t=0;t<e.length;t++){const i=e[t];delete this.data[i]}}}},43:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TargetView=void 0;const n=i(877);t.TargetView=class{constructor(e,t,i,s,o,l,r,a){this.elementListTable=e,this.elementSelectionTable=t,this.elementClearButton=i,this.elementSelectAllButton=s,this.elementFilterText=o,this.elementSelectionCount=l,this.columns=r,this.filterIndex=a,this.rowToKey=[],this.targetCollection=new n.TargetCollection(this.columns[this.filterIndex]),this.selectionCollection=new n.TargetCollection(this.columns[this.filterIndex]),this.elementFilterText.addEventListener("keyup",this.textOnKeyUp.bind(this)),this.elementClearButton.addEventListener("click",this.clearSelection.bind(this)),this.elementSelectAllButton.addEventListener("click",this.tryAddAll.bind(this));const c=this.elementListTable.createTHead().insertRow(),h=this.elementSelectionTable.createTHead().insertRow();for(let e=0;e<r.length;e++){const t=r[e],i=c.insertCell();let n=document.createTextNode(t);i.appendChild(n);const s=h.insertCell();let o=document.createTextNode(t);s.appendChild(o)}this.listBody=this.elementListTable.createTBody(),this.selectBody=this.elementSelectionTable.createTBody()}loadData(e){this.targetCollection.clear(),this.rowToKey=[];const t=this.listBody.rows.length;for(let e=0;e<t;e++)this.listBody.deleteRow(-1);const i=this.selectBody.rows.length;for(let e=0;e<i;e++)this.selectBody.deleteRow(-1);function n(e){return function(){this.tryAddSelection(e)}}for(let t=0;t<e.length;t++){this.targetCollection.addTarget(e[t]);const i=e[t],s=this.listBody.insertRow();for(let e=0;e<this.columns.length;e++){const t=this.columns[e],n=s.insertCell();let o=document.createTextNode(i[t].toString());n.appendChild(o)}const o=i[this.columns[this.filterIndex]];this.rowToKey.push(i[this.columns[this.filterIndex]]),s.addEventListener("click",n(o).bind(this))}this.updateSelectionCount()}tryAddSelection(e){if(!this.selectionCollection.containsKey(e)){const t=this.targetCollection.getTarget(e);this.selectionCollection.addTarget(t);const i=this.selectBody.insertRow();for(let e=0;e<this.columns.length;e++){const n=this.columns[e],s=i.insertCell();let o=document.createTextNode(t[n].toString());s.appendChild(o)}const n=t[this.columns[this.filterIndex]];i.addEventListener("click",function(e){return function(){this.tryRemoveSelection(e)}}(n).bind(this))}this.updateSelectionCount()}tryRemoveSelection(e){if(this.selectionCollection.containsKey(e)){this.selectionCollection.removeTarget(e);for(let t=0;t<this.selectBody.rows.length;t++){const i=this.selectBody.rows[t],n=i.getElementsByTagName("td")[this.filterIndex];if(n){const t=n.textContent||n.innerText;e.toString()===t&&i.remove()}}}this.updateSelectionCount()}tryAddAll(){const e=this.targetCollection.getKeys(),t=this.elementFilterText.value.toUpperCase();for(let i=0;i<e.length;i++){const n=e[i];n.toString().toUpperCase().indexOf(t)>-1&&this.tryAddSelection(n)}this.updateSelectionCount()}clearSelection(){this.selectionCollection.clear();const e=this.selectBody.rows.length;for(let t=0;t<e;t++)this.selectBody.deleteRow(-1);this.updateSelectionCount()}updateSelectionCount(){const e=this.targetCollection.getLength(),t=this.selectionCollection.getLength();this.elementSelectionCount.innerText=t+" out of "+e+" targets selected"}textOnKeyUp(){const e=this.elementFilterText.value.toUpperCase(),t=this.elementListTable.getElementsByTagName("tr");for(let i=0;i<t.length;i++){const n=t[i].getElementsByTagName("td")[this.filterIndex];n&&((n.textContent||n.innerText).toUpperCase().indexOf(e)>-1?t[i].style.display="":t[i].style.display="none")}}getElementListTable(){return this.elementListTable}getElementSelectionTable(){return this.elementSelectionTable}getElementClearButton(){return this.elementClearButton}getElementSelectAllButton(){return this.elementSelectAllButton}getElementFilterText(){return this.elementFilterText}}},697:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tle=void 0;const n=i(406);var s;!function(e){e[e.FIELD_NUMBER=0]="FIELD_NUMBER",e[e.FIELD_NUMBER_IMPLIED=1]="FIELD_NUMBER_IMPLIED",e[e.FIELD_NUMBER_MAPPED=2]="FIELD_NUMBER_MAPPED",e[e.FIELD_STRING=3]="FIELD_STRING"}(s||(s={}));const o=[{name:"title",fieldType:s.FIELD_STRING,row:0,startCol:0,endCol:23},{name:"catalogNumber",fieldType:s.FIELD_NUMBER,row:1,startCol:2,endCol:6},{name:"classification",fieldType:s.FIELD_STRING,row:1,startCol:7,endCol:7},{name:"intLaunchYear",fieldType:s.FIELD_STRING,row:1,startCol:9,endCol:10},{name:"intLaunchNum",fieldType:s.FIELD_STRING,row:1,startCol:11,endCol:13},{name:"intLaunchPiece",fieldType:s.FIELD_STRING,row:1,startCol:14,endCol:16},{name:"epochYear",fieldType:s.FIELD_NUMBER_MAPPED,row:1,startCol:18,endCol:19,callback:function(e){return e>56?1900+e:2e3+e}},{name:"epochFracDay",fieldType:s.FIELD_NUMBER,row:1,startCol:20,endCol:31},{name:"meanMotionDer",fieldType:s.FIELD_NUMBER,row:1,startCol:33,endCol:42},{name:"meanMotionDer2",fieldType:s.FIELD_NUMBER_IMPLIED,row:1,startCol:44,endCol:51},{name:"dragTerm",fieldType:s.FIELD_NUMBER_IMPLIED,row:1,startCol:53,endCol:60},{name:"ephemerisType",fieldType:s.FIELD_NUMBER,row:1,startCol:62,endCol:62},{name:"elementSetNo",fieldType:s.FIELD_NUMBER,row:1,startCol:64,endCol:67},{name:"checkSum1",fieldType:s.FIELD_NUMBER,row:1,startCol:68,endCol:68},{name:"catalogNumber2",fieldType:s.FIELD_NUMBER,row:2,startCol:2,endCol:6},{name:"inclination",fieldType:s.FIELD_NUMBER,row:2,startCol:8,endCol:15},{name:"raAscNode",fieldType:s.FIELD_NUMBER,row:2,startCol:17,endCol:24},{name:"eccentricity",fieldType:s.FIELD_NUMBER_IMPLIED,row:2,startCol:26,endCol:32},{name:"argPerigee",fieldType:s.FIELD_NUMBER,row:2,startCol:34,endCol:41},{name:"meanAnomaly",fieldType:s.FIELD_NUMBER,row:2,startCol:43,endCol:50},{name:"meanMotion",fieldType:s.FIELD_NUMBER,row:2,startCol:52,endCol:62},{name:"revNoAtEpoch",fieldType:s.FIELD_NUMBER,row:2,startCol:63,endCol:67},{name:"checkSum2",fieldType:s.FIELD_NUMBER,row:2,startCol:68,endCol:68}];class l{constructor(){}static fromJson(e){const t=new l;t.epochYear=parseInt(e.EPOCH.substring(0,4));const i=n.JulianTime.timeJulianYmdhms(t.epochYear,1,1,0,0,0);t.jtUt1Epoch=function(e){const t=parseInt(e.substring(0,4)),i=parseInt(e.substring(5,7)),s=parseInt(e.substring(8,10)),o=parseInt(e.substring(11,13)),l=parseInt(e.substring(14,16)),r=parseFloat(e.substring(17));return n.JulianTime.timeJulianYmdhms(t,i,s,o,l,r)}(e.EPOCH),t.epochFracDay=t.jtUt1Epoch-i,t.title=e.OBJECT_NAME,t.catalogNumber=e.NORAD_CAT_ID,t.classification=e.CLASSIFICATION_TYPE,t.intLaunchYear=e.OBJECT_ID.substring(2,4),t.intLaunchNum=e.OBJECT_ID.substring(5,8),t.intLaunchPiece=e.OBJECT_ID.substring(8,11),t.meanMotionDer=e.MEAN_MOTION_DOT,t.meanMotionDer2=e.MEAN_MOTION_DDOT,t.dragTerm=e.BSTAR,t.ephemerisType=e.EPHEMERIS_TYPE,t.elementSetNo=e.ELEMENT_SET_NO,t.catalogNumber2=e.NORAD_CAT_ID,t.inclination=e.INCLINATION,t.raAscNode=e.RA_OF_ASC_NODE,t.eccentricity=e.ECCENTRICITY,t.argPerigee=e.ARG_OF_PERICENTER,t.meanAnomaly=e.MEAN_ANOMALY,t.meanMotion=e.MEAN_MOTION,t.revNoAtEpoch=e.REV_AT_EPOCH;const s=t.toLines();return t.checkSum1=parseInt(s[1].substring(68,69)),t.checkSum2=parseInt(s[2].substring(68,69)),t.checkSumValid=!0,t}static fromLines(e){const t=new l,i={};for(let t=0;t<o.length;t++){const n=o[t],l=e[n.row].substring(n.startCol,n.endCol+1);switch(n.fieldType){case s.FIELD_STRING:i[n.name]=l;break;case s.FIELD_NUMBER:i[n.name]=Number(l);break;case s.FIELD_NUMBER_IMPLIED:"-"==l[0]?i[n.name]=-Number("0."+l.substring(1).replace("-","e-").replace("+","e").replace(" ","")):i[n.name]=Number("0."+l.replace("-","e-").replace("+","e").replace(" ",""));break;case s.FIELD_NUMBER_MAPPED:n.callback&&(i[n.name]=n.callback(Number(l)))}}return function(e){t.title=e.title,t.catalogNumber=e.catalogNumber,t.classification=e.classification,t.intLaunchYear=e.intLaunchYear,t.intLaunchNum=e.intLaunchNum,t.intLaunchPiece=e.intLaunchPiece,t.epochYear=e.epochYear,t.epochFracDay=e.epochFracDay,t.meanMotionDer=e.meanMotionDer,t.meanMotionDer2=e.meanMotionDer2,t.dragTerm=e.dragTerm,t.ephemerisType=e.ephemerisType,t.elementSetNo=e.elementSetNo,t.checkSum1=e.checkSum1,t.catalogNumber2=e.catalogNumber2,t.inclination=e.inclination,t.raAscNode=e.raAscNode,t.eccentricity=e.eccentricity,t.argPerigee=e.argPerigee,t.meanAnomaly=e.meanAnomaly,t.meanMotion=e.meanMotion,t.revNoAtEpoch=e.revNoAtEpoch,t.checkSum2=e.checkSum2}(i),t.checkSumValid=l.lineChecksum(e[1])==t.checkSum1&&l.lineChecksum(e[2])==t.checkSum2,t.jtUt1Epoch=this.parseEpoch(t.epochYear,t.epochFracDay),t}toJson(){let e;function t(e){return e<10?"0"+e.toString():e.toString()}e=parseInt(this.intLaunchYear)>56?"19"+this.intLaunchYear:"20"+this.intLaunchYear;const i=n.JulianTime.timeGregorian(this.jtUt1Epoch),s=i.year+"-"+t(i.month)+"-"+t(i.mday)+"T"+t(i.hour)+":"+t(i.minute)+":"+t(Math.floor(i.second))+"."+(i.second%1).toFixed(6).substring(2);return{TYPE:"TLE",OBJECT_NAME:this.title,OBJECT_ID:e+"-"+this.intLaunchNum+this.intLaunchPiece,EPOCH:s,MEAN_MOTION:this.meanMotion,ECCENTRICITY:this.eccentricity,INCLINATION:this.inclination,RA_OF_ASC_NODE:this.raAscNode,ARG_OF_PERICENTER:this.argPerigee,MEAN_ANOMALY:this.meanAnomaly,EPHEMERIS_TYPE:this.ephemerisType,CLASSIFICATION_TYPE:this.classification,NORAD_CAT_ID:this.catalogNumber,ELEMENT_SET_NO:this.elementSetNo,REV_AT_EPOCH:this.revNoAtEpoch,BSTAR:this.dragTerm,MEAN_MOTION_DOT:this.meanMotionDer,MEAN_MOTION_DDOT:this.meanMotionDer2}}toLines(){function e(e,t,i){let n="";for(let s=0;s<t-1;s++)e<Math.pow(10,t-1-s)&&(n+=i);return n+e.toString()}function t(e){let t=Math.floor(e);return t<10?"  "+t.toString():t<100?" "+t.toString():t.toString()}function i(e,t){return e<0&&(e=-e),(e-Math.floor(e)).toFixed(t).toString().substring(1)}function n(e){const t=Math.sign(e);e*=t;const n=t>0?" ":"-",s=Math.floor(Math.log10(e))+1,o=i(e/Math.pow(10,s),5).substring(1);return 0==e?" 00000+0":e<.1?n+o+s:n+o+"+"+s}const s=this.title,o="1 "+e(this.catalogNumber,5,"0")+this.classification+" "+this.intLaunchYear+this.intLaunchNum+this.intLaunchPiece+" "+(this.epochYear%100).toString()+t(this.epochFracDay)+i(this.epochFracDay,8)+" "+(this.meanMotionDer<0?"-":" ")+i(this.meanMotionDer,8)+" "+n(this.meanMotionDer2)+" "+n(this.dragTerm)+" "+this.ephemerisType+" "+e(this.elementSetNo,4," "),r="2 "+e(this.catalogNumber2,5,"0")+" "+t(this.inclination)+i(this.inclination,4)+" "+t(this.raAscNode)+i(this.raAscNode,4)+" "+i(this.eccentricity,7).substring(1)+" "+t(this.argPerigee)+i(this.argPerigee,4)+" "+t(this.meanAnomaly)+i(this.meanAnomaly,4)+" "+e(Math.floor(this.meanMotion),2," ")+i(this.meanMotion,8)+e(this.revNoAtEpoch,5," ");return[s,o+l.lineChecksum(o),r+l.lineChecksum(r)]}static lineChecksum(e){let t=0;const i=e.substring(0,68);for(let e=0;e<i.length;e++){const n=i[e];"0123456789".indexOf(n)>-1?t+=parseInt(n):"-"==n&&t++}return t%10}static parseEpoch(e,t){const i=[31,e%4==0?29:28,31,30,31,30,31,31,30,31,30,31],s=Math.floor(t);let o=0,l=0;for(o=0;o<12;o++){const e=i[o];if(s-l-e<0)break;l+=e}const r=s-l,a=t-s,c=Math.floor(24*a),h=Math.floor(1440*(a-c/24)),d=86400*(a-c/24-h/1440);return n.JulianTime.timeJulianYmdhms(e,o+1,r,c,h,d)}}t.Tle=l},881:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Sgp4Propagation=void 0;const n=i(579),s=6378.135,o=.07436691613317342,l=.001082616,r=-.002345069720011528;t.Sgp4Propagation=class{constructor(e){this.tle=e}gstime(e){const t=(e-2451545)/36525,i=2*Math.PI;let n=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return n=n*Math.PI/43200%i,n<0&&(n+=i),n}computeGravityPerturbations(){const e=Math.cos(this.inclinationRadsEpoch),t=e*e,i=t*t,n=1-this.tle.eccentricity*this.tle.eccentricity,s=Math.sqrt(n),o=this.brouwerElements.semiMajorAxisBrouwer*n,r=1/(o*o),a=1.5*l*r*this.brouwerElements.meanMotionBrouwer,c=.5*a*l*r,h=7.762359375e-7*r*r*this.brouwerElements.meanMotionBrouwer;return{meanAnomalyDot:this.brouwerElements.meanMotionBrouwer+.5*a*s*(3*t-1)+.0625*c*s*(13-78*t+137*i),argPerigeeDot:-.5*a*(1-5*t)+.0625*c*(7-114*t+395*i)+h*(3-36*t+49*i),lonAscNodeDot:-a*e+(.5*c*(4-19*t)+2*h*(3-7*t))*e}}computeDragPertubationsSgp4(){const e=1-this.tle.eccentricity*this.tle.eccentricity,t=Math.cos(this.inclinationRadsEpoch),i=t*t,n=Math.sin(this.inclinationRadsEpoch),o=(this.brouwerElements.semiMajorAxisBrouwer*(1-this.tle.eccentricity)-1)*s;let a,c,h;h=o<98?20:o<156?o-78:78,a=h/s+1,c=Math.pow((120-h)/s,4);const d=1/(this.brouwerElements.semiMajorAxisBrouwer-a),m=this.brouwerElements.semiMajorAxisBrouwer*this.tle.eccentricity*d,u=m*m,g=this.tle.eccentricity*m,T=Math.abs(1-u),E=c*Math.pow(d,4),p=E/Math.pow(T,3.5),f=p*this.brouwerElements.meanMotionBrouwer*(this.brouwerElements.semiMajorAxisBrouwer*(1+1.5*u+g*(4+u))+.00040598100000000003*d/T*(3*i-1)*(8+3*u*(8+u))),M=this.tle.dragTerm*f;let y=0,C=0;this.tle.eccentricity>1e-4&&(y=-2*E*d*r*this.brouwerElements.meanMotionBrouwer*n/this.tle.eccentricity,C=-2/3*E*this.tle.dragTerm/g);const b=1-i,D=2*this.brouwerElements.meanMotionBrouwer*p*this.brouwerElements.semiMajorAxisBrouwer*e*(m*(2+.5*u)+this.tle.eccentricity*(.5+2*u)-l*d/(this.brouwerElements.semiMajorAxisBrouwer*T)*(-3*(3*i-1)*(1-2*g+u*(1.5-.5*g))+.75*b*(2*u-g*(1+u))*Math.cos(2*this.argPerigeeRadsEpoch))),w=2*p*this.brouwerElements.semiMajorAxisBrouwer*e*(1+2.75*(u+g)+g*u),v=M*M,N=4*this.brouwerElements.semiMajorAxisBrouwer*d*v,I=N*d*M/3,B=(17*this.brouwerElements.semiMajorAxisBrouwer+a)*I,L=.5*I*this.brouwerElements.semiMajorAxisBrouwer*d*(221*this.brouwerElements.semiMajorAxisBrouwer+31*a)*M;return{s:a,c1:M,c2:f,c3:y,c4:D,c5:w,d2:N,d3:B,d4:L,t2cof:1.5*M,t3cof:N+2*v,t4cof:.25*(3*B+M*(12*N+10*v)),t5cof:.2*(3*L+12*M*B+6*N*N+15*v*(2*N+v)),xmcof:C}}computeBrouwer(){const e=1440/(2*Math.PI),t=1-this.tle.eccentricity*this.tle.eccentricity,i=Math.cos(this.inclinationRadsEpoch),n=this.tle.meanMotion/e,s=Math.pow(o/n,2/3),l=.0008119620000000001*(3*i*i-1)/(Math.sqrt(t)*t);let r=l/(s*s);const a=s*(1-r*(1/3+r*(1+134/81*r)));r=l/(a*a);const c=n/(1+r);return{meanMotionBrouwer:c,semiMajorAxisBrouwer:Math.pow(o/c,2/3)}}initialize(){this.inclinationRadsEpoch=n.MathUtils.deg2Rad(this.tle.inclination),this.argPerigeeRadsEpoch=n.MathUtils.deg2Rad(this.tle.argPerigee),this.meanAnomalyRadsEpoch=n.MathUtils.deg2Rad(this.tle.meanAnomaly),this.raAscNodeRadsEpoch=n.MathUtils.deg2Rad(this.tle.raAscNode),Math.PI,this.brouwerElements=this.computeBrouwer(),this.gmstEpoch=this.gstime(this.tle.jtUt1Epoch),this.gravityTerms=this.computeGravityPerturbations(),this.dragTerms=this.computeDragPertubationsSgp4()}computeOsv(e,t,i,n,o,l){const r=Math.sin(e),a=Math.cos(e),c=Math.sin(t),h=Math.cos(t),d=Math.sin(i),m=Math.cos(i),u=-c*m,g=h*m,T=u*r+h*a,E=g*r+c*a,p=d*r,f=u*a-h*r,M=g*a-c*r,y=d*a,C=[0,0,0],b=[0,0,0],D=7.905370510517634;return C[0]=n*T*s,C[1]=n*E*s,C[2]=n*p*s,b[0]=(o*T+l*f)*D,b[1]=(o*E+l*M)*D,b[2]=(o*p+l*y)*D,{r:C,v:b}}applySecularPerturbations(e){const t=e*e,i=t*e,n=i*e,s=n*e,r=2*Math.PI,a=1-this.tle.eccentricity*this.tle.eccentricity,c=this.brouwerElements.semiMajorAxisBrouwer*a,h=this.meanAnomalyRadsEpoch+this.gravityTerms.meanAnomalyDot*e,d=this.argPerigeeRadsEpoch+this.gravityTerms.argPerigeeDot*e,m=this.raAscNodeRadsEpoch+this.gravityTerms.lonAscNodeDot*e,u=1/(this.brouwerElements.semiMajorAxisBrouwer-this.dragTerms.s),g=this.brouwerElements.semiMajorAxisBrouwer*this.tle.eccentricity*u,T=1+g*Math.cos(this.meanAnomalyRadsEpoch),E=T*T*T,p=(m+3.5*a*(-1.5*l*(1/(c*c))*this.brouwerElements.meanMotionBrouwer*Math.cos(this.inclinationRadsEpoch))*this.dragTerms.c1*t)%r,f=this.tle.dragTerm*this.dragTerms.c3*Math.cos(this.argPerigeeRadsEpoch)*e,M=this.dragTerms.xmcof*(Math.pow(1+g*Math.cos(h),3)-E),y=h+f+M,C=(d-f-M)%r,b=1-this.dragTerms.c1*e-this.dragTerms.d2*t-this.dragTerms.d3*i-this.dragTerms.d4*n,D=this.tle.dragTerm*this.dragTerms.c4*e+this.tle.dragTerm*this.dragTerms.c5*(Math.sin(y)-Math.sin(this.meanAnomalyRadsEpoch)),w=this.dragTerms.t2cof*t+this.dragTerms.t3cof*i+this.dragTerms.t4cof*n+this.dragTerms.t5cof*s;this.inclinationRadsEpoch,this.brouwerElements.meanMotionBrouwer;let v=this.brouwerElements.semiMajorAxisBrouwer*b*b,N=o/Math.pow(v,1.5),I=this.tle.eccentricity-D;return I<1e-6&&(I=1e-6),{am:v,em:I,im:this.inclinationRadsEpoch,nodem:p,argpm:C,mm:(y+this.brouwerElements.meanMotionBrouwer*w)%r,nm:N}}keplerSolve(e,t,i){let n=i,s=9999.9,o=1,l=0,r=0;for(;Math.abs(s)>=1e-12&&o<=10;)l=Math.sin(n),r=Math.cos(n),s=1-r*e-l*t,s=(i-t*r+e*l-n)/s,Math.abs(s)>=.95&&(s=s>0?.95:-.95),n+=s,o+=1;return n}compute(e){const t=2*Math.PI,{am:i,em:n,im:s,nodem:l,argpm:r,mm:a,nm:c}=this.applySecularPerturbations(e),h=.000586267430002882*Math.sin(this.inclinationRadsEpoch)*(3+5*Math.cos(this.inclinationRadsEpoch))/Math.max(1+Math.cos(this.inclinationRadsEpoch),1e-12),d=n*Math.cos(r),m=1/(i*(1-n*n)),u=.001172534860005764*Math.sin(this.inclinationRadsEpoch),g=n*Math.sin(r)+m*u,T=(a+r+l+m*h*d-l)%t,E=this.keplerSolve(d,g,T),p=Math.sin(E),f=Math.cos(E),M=d*p-g*f,y=d*d+g*g,C=i*(1-y);if(C<0);else{const e=i*(1-(d*f+g*p)),t=Math.sqrt(i)*M/e,n=Math.sqrt(C)/e,s=Math.sqrt(1-y);let r=M/(1+s);const a=i/e*(p-g-d*r),h=i/e*(f-d+g*r);let m=Math.atan2(a,h);const u=(h+h)*a,T=1-2*a*a;r=1/C;const E=541308e-9*r,b=E*r,D=Math.cos(this.inclinationRadsEpoch)*Math.cos(this.inclinationRadsEpoch),w=-(1-5*D)-D-D,v=1-D,N=7*D-1,I=Math.cos(this.inclinationRadsEpoch),B=Math.sin(this.inclinationRadsEpoch),L=e*(1-1.5*b*s*w)+.5*E*v*T;m-=.25*b*N*u;const A=l+1.5*b*I*u,_=this.inclinationRadsEpoch+1.5*b*I*B*T,F=t-c*E*v*u/o,P=n+c*E*(v*T+1.5*w)/o,{r:S,v:R}=this.computeOsv(m,A,_,L,F,P);console.log("r "+S),console.log("v "+R)}}}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}var n={};(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.HelpView=e.PanelView=e.Panel=e.DatasetView=e.Dataset=e.MathUtils=e.JulianTime=e.Sgp4Propagation=e.Tle=e.TargetView=e.TargetCollection=void 0;const t=i(877);Object.defineProperty(e,"TargetCollection",{enumerable:!0,get:function(){return t.TargetCollection}});const s=i(43);Object.defineProperty(e,"TargetView",{enumerable:!0,get:function(){return s.TargetView}});const o=i(697);Object.defineProperty(e,"Tle",{enumerable:!0,get:function(){return o.Tle}});const l=i(881);Object.defineProperty(e,"Sgp4Propagation",{enumerable:!0,get:function(){return l.Sgp4Propagation}});const r=i(406);Object.defineProperty(e,"JulianTime",{enumerable:!0,get:function(){return r.JulianTime}});const a=i(579);Object.defineProperty(e,"MathUtils",{enumerable:!0,get:function(){return a.MathUtils}});const c=i(654);Object.defineProperty(e,"Dataset",{enumerable:!0,get:function(){return c.Dataset}});const h=i(643);Object.defineProperty(e,"DatasetView",{enumerable:!0,get:function(){return h.DatasetView}});const d=i(933);Object.defineProperty(e,"Panel",{enumerable:!0,get:function(){return d.Panel}});const m=i(969);Object.defineProperty(e,"PanelView",{enumerable:!0,get:function(){return m.PanelView}});const u=i(857);Object.defineProperty(e,"HelpView",{enumerable:!0,get:function(){return u.HelpView}})})(),satellites=n})();